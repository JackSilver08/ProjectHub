@page
@model PROJECTHUB_ENTERPRISE.Pages.Account.ProfileModel
@{
    ViewData["Title"] = "My Profile";
}
<link rel="stylesheet" href="~/css/profile.css" asp-append-version="true" />

<div class="profile-container container mt-4">
    <div class="row justify-content-center">
        <div class="col-lg-9 col-xl-8">
            <div class="profile-card card shadow border-0 overflow-hidden">
                <!-- ===== COVER ===== -->
                <div class="profile-cover bg-primary bg-gradient"></div>

                <div class="profile-card-body card-body px-4 pb-4">
                    <!-- ===== AVATAR + BASIC INFO ===== -->
                    <div class="profile-header d-flex align-items-end gap-4">
                        <img src="@(
                             string.IsNullOrEmpty(Model.CurrentUser?.AvatarUrl)
                                 ? "/images/default-avatar.png"
                                 : Model.CurrentUser.AvatarUrl
                                                          )"
                             class="profile-avatar rounded-circle border border-4 border-white shadow"
                             width="120"
                             height="120"
                             alt="Profile Avatar" />

                        <div class="profile-info flex-grow-1">
                            <h3 class="fw-bold mb-1">
                                @(
                                                                string.IsNullOrWhiteSpace(Model.CurrentUser?.FullName)
                                                                ? Model.CurrentUser?.Username
                                                                : Model.CurrentUser!.FullName
                                                                )
                            </h3>

                            <div class="profile-title text-muted mb-2">
                                @(string.IsNullOrEmpty(Model.CurrentUser?.JobTitle)
                                                                ? "Employee"
                                                                : Model.CurrentUser.JobTitle)

                                @if (!string.IsNullOrEmpty(Model.CurrentUser?.Department))
                                {
                                    <span> • @Model.CurrentUser.Department</span>
                                }
                            </div>

                            <div class="profile-email small text-muted">
                                <i class="bi bi-envelope profile-icon me-1"></i>
                                @Model.CurrentUser?.Email
                            </div>
                        </div>

                        <div>
                            @if (Model.CurrentUser?.IsActive == true)
                            {
                                <span class="profile-status-badge profile-status-active badge bg-success px-3 py-2">Active</span>
                            }
                            else
                            {
                                <span class="profile-status-badge profile-status-inactive badge bg-secondary px-3 py-2">Inactive</span>
                            }
                        </div>
                    </div>

                    <hr class="profile-divider my-4" />

                    <!-- ===== DETAILS ===== -->
                    <div class="profile-details-grid row g-3">
                        <div class="col-md-6">
                            <div class="profile-detail-card border rounded-3 p-3 h-100">
                                <div class="profile-detail-label text-muted small mb-1">
                                    <i class="bi bi-person profile-icon me-1"></i> Username
                                </div>
                                <div class="profile-detail-value fw-semibold">
                                    @Model.CurrentUser?.Username
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="profile-detail-card border rounded-3 p-3 h-100">
                                <div class="profile-detail-label text-muted small mb-1">
                                    <i class="bi bi-calendar profile-icon me-1"></i> Account Created
                                </div>
                                <div class="profile-detail-value fw-semibold">
                                    @Model.CurrentUser!.CreatedAt.ToString("dd MMM yyyy • HH:mm")
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ===== ACTION ===== -->
                    <div class="d-flex justify-content-end mt-4">
                        <a class="profile-action-button btn btn-primary px-4"
                           asp-page="/Account/EditProfile">
                            <i class="bi bi-pencil profile-icon me-1"></i> Edit Profile
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>